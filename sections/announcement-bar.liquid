{% comment %}
  @file Announcement Bar Section
  @summary Simple announcement bar for site-wide messages
  @customizable
{% endcomment %}

{%- for block in section.blocks -%}
  {%- case block.type -%}
    {%- when 'announcement' -%}
      {%- if block.settings.text != blank -%}
        <div class="announcement-bar color-{{ block.settings.color_scheme }} gradient" role="region" aria-label="{{ 'sections.header.announcement' | t }}" {{ block.shopify_attributes }}>
          <div class="container mx-auto px-4">
            <div class="announcement-bar__content flex justify-center p-2 text-sm">
              {%- if block.settings.link != blank -%}
                <a href="{{ block.settings.link }}" class="announcement-link inline-block w-full text-center">
                  {{ block.settings.text | escape }}
                </a>
              {%- else -%}
                <p class="announcement-text w-full text-center">{{ block.settings.text | escape }}</p>
              {%- endif -%}
            </div>
          </div>
        </div>
      {%- endif -%}
  {%- endcase -%}
{%- endfor -%}

{% schema %}
{
  "name": "Announcement bar",
  "max_blocks": 12,
  "blocks": [
    {
      "type": "announcement",
      "name": "Announcement",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "default": "Free shipping on all orders over $75",
          "label": "Text"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "select",
          "id": "color_scheme",
          "options": [
            {
              "value": "accent-1",
              "label": "Primary"
            },
            {
              "value": "accent-2",
              "label": "Secondary"
            },
            {
              "value": "background-1",
              "label": "Light"
            },
            {
              "value": "background-2",
              "label": "Dark"
            }
          ],
          "default": "accent-1",
          "label": "Color scheme"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Announcement bar",
      "blocks": [
        {
          "type": "announcement"
        }
      ]
    }
  ]
}
{% endschema %}

{% stylesheet %}
.announcement-bar {
  background-color: var(--color-primary);
  color: white;
}

.announcement-bar.color-accent-1 {
  background-color: var(--color-primary);
  color: white;
}

.announcement-bar.color-accent-2 {
  background-color: var(--color-secondary);
  color: var(--color-text);
}

.announcement-bar.color-background-1 {
  background-color: white;
  color: var(--color-text);
}

.announcement-bar.color-background-2 {
  background-color: #1F2937;
  color: white;
}

.announcement-link {
  color: inherit;
  text-decoration: none;
}

.announcement-link:hover {
  text-decoration: underline;
}
{% endstylesheet %}